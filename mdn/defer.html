<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>Hi</title>
    <script>
        console.log("Howdy ~");
    </script>
    <script src="https://unpkg.com/vue@3.2.41/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-router@4.1.5/dist/vue-router.global.js"></script>
  </head>
  <body>
    Hello 👋🏻 ~
  </body>
  <script>
    /**
        上面代码执行顺序为
        1. 在控制台打印: Howdy ~
        2. 请求并执行 vue.global.js
        3. 请求并执行 vue-router.global.js
        4. 在页面中展示：Hello 👋🏻 ~
        5. 触发 DOMContentLoaded 事件


        浏览器的解析规则是: 如果遇到script标签，则暂停构建dom，转而开始执行 script 标签，如果是外部script，
        那么浏览器还需要一直等待其【下载】并【执行】后，在继续解析后面的HTML。

        如果请求并执行「vue.global.js」需要 3 秒，「vue-router.global.js」需要 2 秒，那么页面中的 Hello 👋🏻 ~，则至少需要 5 秒以上才会展示出来

        可以看到，script 标签会阻塞浏览器解析 HTML，如果把 script 都放在 head 中，在网络不佳的情况下，就会导致页面长期处于白屏状态。
        
        在很久以前，一般都是将这些外联脚本，放在 body 标签的最后面，确保先解析展示 body 中的内容，然后再一个个请求执行这些外联脚本。
        
        现在 script 标签新增了 2 个属性：defer 和 async，就是为了解决此类问题，提升页面性能的

        <script defer>
        这个布尔属性被设定用来通知浏览器该脚本将在文档完成解析后，触发 DOMContentLoaded 事件前执行
        有 defer 属性的脚本会阻止 DOMContentLoaded 事件，直到脚本被加载并且解析完成。
        

    */ 
  </script>
</html>
